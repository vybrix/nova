<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>nova - stream movies & tv shows for free</title>
    <link rel="icon" href="/logo.png" type="image/png">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.10.3/dist/cdn.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #121212;
            color: #e0e0e0;
        }
        .container {
            max-width: 1200px;
        }
        .card-hover:hover .card-overlay {
            opacity: 1;
        }
        .card-overlay {
            background: linear-gradient(to top, rgba(0,0,0,0.9) 0%, rgba(0,0,0,0.7) 30%, rgba(0,0,0,0) 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        .animate-fade-in {
            animation: fadeIn 0.3s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }
        .search-container {
            position: relative;
            background: #1f1f1f;
            border-radius: 9999px;
            overflow: hidden;
            transition: all 0.3s;
        }
        .search-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(400px circle at var(--mouse-x) var(--mouse-y), rgba(64,64,64,0.1), transparent 40%);
            opacity: 0;
            transition: opacity 0.5s;
        }
        .search-container:hover::before {
            opacity: 1;
        }
        .search-container input {
            background: transparent;
            border: 1px solid #4a4a4a;
            color: #e0e0e0;
            padding-left: 2.5rem;
            transition: all 0.3s;
        }
        .search-container input:focus {
            outline: none;
            border-color: #555;
            box-shadow: 0 0 0 2px #333;
        }
        .filter-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            z-index: 10;
            background: #1e1e1e;
            border: 1px solid #333;
            border-radius: 0.5rem;
            padding: 1rem;
            width: 300px;
            max-height: 400px;
            overflow-y: auto;
        }
        .modal-animation {
            animation: slideIn 0.3s ease-in-out;
        }
        @keyframes slideIn {
            from { transform: translateY(-20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        .badge {
            font-size: 0.75rem;
            padding: 0.25rem 0.5rem;
            border-radius: 9999px;
        }
        .badge.genre {
            background-color: #333;
            color: #e0e0e0;
        }
    </style>
</head>
<body x-data="app()">
    <div class="min-h-screen">
        <header class="fixed top-0 left-0 right-0 bg-black bg-opacity-80 backdrop-blur-sm z-40">
            <div class="container mx-auto px-4 md:px-6 py-4 flex items-center justify-between">
                <a href="index.html" class="flex items-center space-x-2">
                    <img src="/logo.png" alt="nova logo" class="h-8">
                    <span class="text-xl font-bold text-white hidden md:block">nova</span>
                </a>

                <nav class="hidden md:flex items-center space-x-6 text-gray-400 font-medium">
                    <button @click="currentTab = 'movies'; fetchContent()" :class="{'text-white border-b-2 border-gray-500': currentTab === 'movies'}" class="hover:text-white transition-colors duration-200 py-1">movies</button>
                    <button @click="currentTab = 'tv'; fetchContent()" :class="{'text-white border-b-2 border-gray-500': currentTab === 'tv'}" class="hover:text-white transition-colors duration-200 py-1">tv shows</button>
                </nav>

                <div class="flex items-center space-x-4">
                    <div class="relative search-container group hidden sm:block w-72">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 absolute left-3 top-1/2 -translate-y-1/2 text-gray-500" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd" />
                        </svg>
                        <input type="text" x-model="searchQuery" @input.debounce.500="searchContent()" placeholder="search for movies or shows" class="w-full pl-10 pr-4 py-2 rounded-full text-sm">
                    </div>

                    <button @click="showWatchLater = true" class="relative text-gray-400 hover:text-white transition-colors duration-200">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z" />
                        </svg>
                        <span x-show="watchLaterCount > 0" x-text="watchLaterCount" class="absolute top-0 right-0 transform translate-x-1/2 -translate-y-1/2 bg-red-600 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center"></span>
                    </button>

                    <div x-data="{ open: false }" class="relative">
                        <button @click="open = !open" class="text-gray-400 hover:text-white flex items-center space-x-1 transition-colors duration-200">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5h12M9 3v2m1.066 11.234A3.013 3.013 0 0113 13h1m-1 0h1m4.066 3.234a3.013 3.013 0 01-4 0m0 0a3.013 3.013 0 01-4 0" />
                            </svg>
                            <span class="hidden md:inline" x-text="language.toUpperCase()"></span>
                        </button>
                        <div x-show="open" @click.away="open = false" class="absolute right-0 mt-2 w-32 bg-gray-800 rounded-md shadow-lg z-20">
                            <ul class="py-1 text-sm text-gray-300">
                                <template x-for="lang in ['en', 'fr', 'es', 'de', 'ja', 'ko']" :key="lang">
                                    <li><a href="#" @click="language = lang; open = false; fetchContent()" x-text="getLanguageName(lang)" :class="{'bg-gray-700 text-white': language === lang}" class="block px-4 py-2 hover:bg-gray-700"></a></li>
                                </template>
                            </ul>
                        </div>
                    </div>

                    <button @click="mobileMenu = true" class="md:hidden text-gray-400 hover:text-white transition-colors duration-200">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />
                        </svg>
                    </button>
                </div>
            </div>
        </header>

        <div x-show="mobileMenu"
             x-transition:enter="transition ease-out duration-300"
             x-transition:enter-start="opacity-0 translate-x-full"
             x-transition:enter-end="opacity-100 translate-x-0"
             x-transition:leave="transition ease-in duration-200"
             x-transition:leave-start="opacity-100 translate-x-0"
             x-transition:leave-end="opacity-0 translate-x-full"
             class="fixed inset-0 bg-gray-900 z-50 p-6 md:hidden">
            <div class="flex items-center justify-between mb-8">
                <a href="index.html" class="flex items-center space-x-2">
                    <img src="/logo.png" alt="nova logo" class="h-8">
                    <span class="text-xl font-bold text-white">nova</span>
                </a>
                <button @click="mobileMenu = false" class="text-gray-400 hover:text-white">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <div class="space-y-4">
                <div class="relative search-container group w-full">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 absolute left-3 top-1/2 -translate-y-1/2 text-gray-500" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd" />
                    </svg>
                    <input type="text" x-model="searchQuery" @input.debounce.500="searchContent()" placeholder="search for movies or shows" class="w-full pl-10 pr-4 py-2 rounded-full text-sm">
                </div>
                <button @click="currentTab = 'movies'; fetchContent(); mobileMenu = false" :class="{'text-white bg-gray-700': currentTab === 'movies'}" class="block w-full text-left text-gray-400 hover:text-white hover:bg-gray-700 px-4 py-2 rounded-md transition-colors duration-200">movies</button>
                <button @click="currentTab = 'tv'; fetchContent(); mobileMenu = false" :class="{'text-white bg-gray-700': currentTab === 'tv'}" class="block w-full text-left text-gray-400 hover:text-white hover:bg-gray-700 px-4 py-2 rounded-md transition-colors duration-200">tv shows</button>
            </div>
        </div>

        <div class="pt-24 pb-12">
            <div class="container mx-auto px-4 md:px-6">
                <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-8">
                    <h1 class="text-3xl sm:text-4xl font-bold text-white">
                        <span x-text="currentTab === 'movies' ? 'popular movies' : 'popular tv shows'"></span>
                        <span x-show="searchQuery" class="text-gray-400 text-2xl font-normal ml-2"> &ndash; results for "<span x-text="searchQuery"></span>"</span>
                    </h1>
                </div>

                <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between mb-8 space-y-4 sm:space-y-0">
                    <div class="flex items-center space-x-2 overflow-x-auto pb-2">
                        <div x-data="{ open: false }" class="relative">
                            <button @click="open = !open" class="flex items-center space-x-2 bg-gray-800 hover:bg-gray-700 px-4 py-2 rounded-full transition-all duration-300">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd" d="M3 3a1 1 0 011-1h12a1 1 0 011 1v3a1 1 0 01-.293.707L12 11.414V15a1 1 0 01-1 1H9a1 1 0 01-1-1v-3.586L3.293 6.707A1 1 0 013 6V3z" clip-rule="evenodd" />
                                </svg>
                                <span>filters</span>
                                <span x-show="hasActiveFilters" class="text-xs bg-gray-600 px-2 rounded-full ml-1" x-text="
                                    (selectedGenre ? 1 : 0) + (minRating ? 1 : 0) + (yearRange ? 1 : 0) + (selectedLanguage ? 1 : 0)
                                "></span>
                            </button>
                            <div x-show="open" @click.away="open = false" class="filter-dropdown animate-fade-in" x-cloak>
                                <div class="mb-4">
                                    <label class="block text-sm font-medium mb-1">genre</label>
                                    <select x-model="selectedGenre" @change="applyFilters(); open = false" class="w-full p-2 bg-gray-700 border border-gray-600 rounded-md text-sm">
                                        <option value="">all genres</option>
                                        <template x-for="genre in genres" :key="genre.id">
                                            <option :value="genre.id" x-text="genre.name"></option>
                                        </template>
                                    </select>
                                </div>
                                <div class="mb-4">
                                    <label class="block text-sm font-medium mb-1">minimum rating</label>
                                    <select x-model="minRating" @change="applyFilters(); open = false" class="w-full p-2 bg-gray-700 border border-gray-600 rounded-md text-sm">
                                        <option value="">any rating</option>
                                        <option value="9">9+ ⭐</option>
                                        <option value="8">8+ ⭐</option>
                                        <option value="7">7+ ⭐</option>
                                        <option value="6">6+ ⭐</option>
                                        <option value="5">5+ ⭐</option>
                                    </select>
                                </div>
                                <div class="mb-4">
                                    <label class="block text-sm font-medium mb-1">year</label>
                                    <select x-model="yearRange" @change="applyFilters(); open = false" class="w-full p-2 bg-gray-700 border border-gray-600 rounded-md text-sm">
                                        <option value="">any year</option>
                                        <option value="2020,2025">2020s</option>
                                        <option value="2010,2019">2010s</option>
                                        <option value="2000,2009">2000s</option>
                                        <option value="1990,1999">1990s</option>
                                        <option value="1980,1989">1980s</option>
                                        <option value="1970,1979">1970s</option>
                                        <option value="1960,1969">1960s</option>
                                    </select>
                                </div>
                                <div class="mb-4">
                                    <label class="block text-sm font-medium mb-1">original language</label>
                                    <select x-model="selectedLanguage" @change="applyFilters(); open = false" class="w-full p-2 bg-gray-700 border border-gray-600 rounded-md text-sm">
                                        <option value="">any language</option>
                                        <template x-for="lang in ['en', 'fr', 'es', 'de', 'ja', 'ko']" :key="lang">
                                            <option :value="lang" x-text="getLanguageName(lang)"></option>
                                        </template>
                                    </select>
                                </div>
                                <div class="flex justify-between items-center mt-4 border-t border-gray-700 pt-4">
                                    <button @click="clearAllFilters(); open = false" x-show="hasActiveFilters" class="text-sm text-gray-400 hover:text-white transition-colors">clear all</button>
                                    <button @click="applyFilters(); open = false" class="text-sm bg-gray-600 hover:bg-gray-500 text-white px-4 py-2 rounded-full transition-colors">apply</button>
                                </div>
                            </div>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span x-show="hasActiveFilters" class="text-sm text-gray-400 flex items-center space-x-1">
                                <span x-show="selectedGenre" class="badge genre" x-text="getGenreName(selectedGenre)"></span>
                                <span x-show="minRating" class="badge genre" x-text="minRating + '+ ⭐'"></span>
                                <span x-show="yearRange" class="badge genre" x-text="getYearRangeName(yearRange)"></span>
                                <span x-show="selectedLanguage" class="badge genre" x-text="getLanguageName(selectedLanguage)"></span>
                                <button @click="clearAllFilters()" class="text-xs text-gray-500 hover:text-white transition-colors">&times;</button>
                            </span>
                        </div>
                    </div>
                    <button @click="pickRandom()" class="flex items-center space-x-2 bg-gray-800 hover:bg-gray-700 px-4 py-2 rounded-full transition-all duration-300">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z" />
                        </svg>
                        <span>random pick</span>
                    </button>
                </div>

                <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4">
                    <template x-for="item in filteredContent" :key="item.id">
                        <div class="relative card-hover" @contextmenu.prevent="
                            $store.contextMenu = {
                                show: true,
                                x: $event.clientX,
                                y: $event.clientY,
                                item: item
                            }">
                            <a :href="'watch.html?id=' + item.id + '&type=' + (currentTab === 'movies' ? 'movie' : 'tv')"
                               class="block rounded-lg overflow-hidden bg-gray-800 aspect-[2/3]">
                                <div class="relative h-full">
                                    <img :src="'https://image.tmdb.org/t/p/w500' + item.poster_path" 
                                            :alt="item.title || item.name"
                                            class="w-full h-full object-cover"
                                            @error="event => {
                                                event.target.src = '/logo.png';
                                                event.target.classList.remove('object-cover');
                                                event.target.classList.add('object-contain');
                                            }" />
                                    <div class="card-overlay absolute inset-0 flex flex-col justify-end p-2 sm:p-3 md:p-4">
                                        <h3 class="text-sm md:text-lg font-semibold" x-text="item.title || item.name"></h3>
                                        <p class="text-gray-400 text-xs md:text-sm mt-1" x-text="'⭐ ' + (item.vote_average || 'N/A') + '/10'"></p>
                                        <p class="text-gray-300 text-xs md:text-sm mt-2 hidden sm:block" x-text="item.overview.substring(0, 100) + '...'"></p>
                                    </div>
                                </div>
                            </a>
                            <button @click.stop="toggleWatchLater(item)"
                                    class="absolute top-2 right-2 p-1.5 md:p-2 bg-gray-900 bg-opacity-75 rounded-full hover:bg-gray-700 transition-all duration-300"
                                    :class="isInWatchLater(item) ? 'text-white' : 'text-gray-500'">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 md:h-5 md:w-5" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M17 3H7c-1.1 0-2 .9-2 2v16l7-3 7 3V5c0-1.1-.9-2-2-2z"/>
                                </svg>
                            </button>
                        </div>
                    </template>
                </div>

                <div class="mt-12 flex items-center justify-center space-x-4">
                    <button @click="currentPage > 1 && changePage(currentPage - 1)"
                            :class="currentPage === 1 ? 'opacity-50 cursor-not-allowed' : 'hover:bg-gray-700'"
                            class="bg-gray-800 px-6 py-3 rounded-lg transition-all duration-300 flex items-center space-x-2">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span>previous</span>
                    </button>
                    
                    <span class="text-gray-400">page <span class="text-white font-medium" x-text="currentPage"></span></span>

                    <button @click="changePage(currentPage + 1)"
                            class="bg-gray-800 hover:bg-gray-700 px-6 py-3 rounded-lg transition-all duration-300 flex items-center space-x-2">
                        <span>next</span>
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <div class="container mx-auto px-4 md:px-6 py-8 md:py-12">
            <div class="text-center mb-6 md:mb-8">
                <h2 class="text-xl md:text-2xl font-bold text-gray-300">content available from</h2>
                <p class="text-sm md:text-base text-gray-400 mt-2">nova aggregates content from various premium streaming platforms</p>
            </div>
            <div class="grid grid-cols-3 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4 items-center justify-items-center opacity-80">
                <a href="https://netflix.com" target="_blank" class="transform transition-transform hover:scale-105">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/0/08/Netflix_2015_logo.svg" 
                            alt="netflix" 
                            class="h-6 md:h-8 w-auto grayscale hover:grayscale-0 hover:scale-110 hover:brightness-125 transition-all duration-300 transform hover:drop-shadow-[0_0_7px_rgba(229,9,20,0.7)]">
                </a>
                <a href="https://www.primevideo.com" target="_blank" class="transform transition-transform hover:scale-105">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/1/11/Amazon_Prime_Video_logo.svg" 
                            alt="prime video" 
                            class="h-6 md:h-8 w-auto grayscale hover:grayscale-0 hover:scale-110 hover:brightness-125 transition-all duration-300 transform hover:drop-shadow-[0_0_7px_rgba(0,168,225,0.7)]">
                </a>
                <a href="https://www.disneyplus.com" target="_blank" class="transform transition-transform hover:scale-105">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/3/3e/Disney%2B_logo.svg" 
                            alt="disney+" 
                            class="h-6 md:h-8 w-auto grayscale hover:grayscale-0 hover:scale-110 hover:brightness-125 transition-all duration-300 transform hover:drop-shadow-[0_0_7px_rgba(113,168,255,0.7)]">
                </a>
                <a href="https://www.hulu.com" target="_blank" class="transform transition-transform hover:scale-105">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/f/f9/Hulu_logo_%282018%29.svg" 
                            alt="hulu" 
                            class="h-6 md:h-8 w-auto grayscale hover:grayscale-0 hover:scale-110 hover:brightness-125 transition-all duration-300 transform hover:drop-shadow-[0_0_7px_rgba(28,231,131,0.7)]">
                </a>
                <a href="https://www.max.com" target="_blank" class="transform transition-transform hover:scale-105">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/1/17/HBO_Max_Logo.svg" 
                            alt="hbo max" 
                            class="h-6 md:h-8 w-auto grayscale hover:grayscale-0 hover:scale-110 hover:brightness-125 transition-all duration-300 transform hover:drop-shadow-[0_0_7px_rgba(116,80,254,0.7)]">
                </a>
                <a href="https://tv.apple.com" target="_blank" class="transform transition-transform hover:scale-105">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/2/28/Apple_TV_Plus_Logo.svg" 
                            alt="apple tv+" 
                            class="h-6 md:h-8 w-auto grayscale hover:grayscale-0 hover:scale-110 hover:brightness-125 transition-all duration-300 transform hover:drop-shadow-[0_0_7px_rgba(0,244,244,0.7)]">
                </a>
            </div>
        </div>

        <footer class="text-gray-400 py-4 md:py-6 mt-8 md:mt-12">
            <div class="container mx-auto px-4 md:px-6 text-center">
                <p class="text-xs md:text-sm">
                    nova doesn't store files, but provides links to external services. legal issues should be discussed with file providers and hosts. the files provided by video providers are not covered by nova.
                </p>
                <p class="mt-2 text-xs">
                    made with ❤ by ambrosial. 07/04/25
                </p>
                <p class="mt-2 text-xs">
                    <a href="mailto:contact.novastream@gmail.com" class="text-gray-400 hover:text-white transition-colors">contact.novastream@gmail.com</a>
                </p>
            </div>
        </footer>

        <div x-show="showWatchLater" 
             class="fixed inset-0 z-50 overflow-auto bg-black bg-opacity-90 flex items-start justify-center"
             @click.away="showWatchLater = false"
             x-transition:enter="transition ease-out duration-300"
             x-transition:enter-start="opacity-0"
             x-transition:enter-end="opacity-100"
             x-transition:leave="transition ease-in duration-200"
             x-transition:leave-start="opacity-100"
             x-transition:leave-end="opacity-0">
            <div class="bg-gray-900 rounded-lg w-full max-w-4xl mt-20 modal-animation">
                <div class="p-6 border-b border-gray-800">
                    <div class="flex items-center justify-between">
                        <h2 class="text-2xl font-bold">watch later</h2>
                        <div class="flex items-center space-x-4">
                            <button @click="showClearConfirm = true" 
                                    x-show="watchLaterItems.length > 0"
                                    class="text-gray-400 hover:text-red-500 flex items-center space-x-2 transition-colors duration-300">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                                </svg>
                                <span>clear all</span>
                            </button>
                            <button @click="showWatchLater = false" class="text-gray-500 hover:text-white">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="p-6">
                    <div x-show="!watchLaterItems.length" class="text-center text-gray-500 py-8">
                        no items in your watch later list
                    </div>
                    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4">
                        <template x-for="item in watchLaterItems" :key="item.id">
                            <div class="relative bg-gray-800 rounded-lg overflow-hidden">
                                <a :href="'watch.html?id=' + item.id + '&type=' + item.type"
                                   class="block">
                                    <img :src="'https://image.tmdb.org/t/p/w500' + item.poster_path" 
                                            :alt="item.title || item.name"
                                            class="w-full h-48 object-cover">
                                    <div class="p-4">
                                        <h3 class="font-medium" x-text="item.title || item.name"></h3>
                                        <p class="text-gray-400 text-sm mt-1" x-text="'⭐ ' + (item.vote_average || 'N/A') + '/10'"></p>
                                    </div>
                                </a>
                                <button @click="toggleWatchLater(item)"
                                        class="absolute top-2 right-2 p-2 bg-gray-900 bg-opacity-75 rounded-full hover:bg-gray-700 transition-all duration-300 text-white">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M17 3H7c-1.1 0-2 .9-2 2v16l7-3 7 3V5c0-1.1-.9-2-2-2z"/>
                                    </svg>
                                </button>
                            </div>
                        </template>
                    </div>
                </div>
            </div>
        </div>

        <div x-show="showClearConfirm" 
             class="fixed inset-0 z-[60] overflow-auto bg-black bg-opacity-90 flex items-center justify-center"
             @click.away="showClearConfirm = false"
             x-transition:enter="transition ease-out duration-300"
             x-transition:enter-start="opacity-0 transform scale-95"
             x-transition:enter-end="opacity-100 transform scale-100"
             x-transition:leave="transition ease-in duration-200"
             x-transition:leave-start="opacity-100 transform scale-100"
             x-transition:leave-end="opacity-0 transform scale-95">
            <div class="bg-gray-900 rounded-lg w-full max-w-md p-6 modal-animation">
                <div class="text-center">
                    <div class="w-16 h-16 rounded-full bg-red-500 bg-opacity-10 mx-auto flex items-center justify-center mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-red-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                        </svg>
                    </div>
                    <h3 class="text-xl font-bold mb-2">clear watch later list?</h3>
                    <p class="text-gray-400 mb-6">this action cannot be undone. are you sure you want to remove all items from your watch later list?</p>
                    <div class="flex space-x-3 justify-center">
                        <button @click="showClearConfirm = false" 
                                class="px-4 py-2 bg-gray-800 hover:bg-gray-700 rounded-lg transition-colors duration-300">
                            cancel
                        </button>
                        <button @click="doClearWatchLater()" 
                                class="px-4 py-2 bg-red-600 hover:bg-red-700 rounded-lg transition-colors duration-300">
                            clear all
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div x-data="contextMenuHandler()" 
            x-show="$store.contextMenu.show"
            @click.away="$store.contextMenu.show = false"
            @keydown.escape.window="$store.contextMenu.show = false"
            :style="`position: fixed; left: ${$store.contextMenu.x}px; top: ${$store.contextMenu.y}px`"
            class="bg-gray-800 border border-gray-700 rounded-lg shadow-xl z-50 w-56 py-2 animate-fade-in"
            x-cloak>
            
            <div class="px-4 py-2 border-b border-gray-700">
                <h3 class="text-sm font-medium text-gray-300" x-text="$store.contextMenu.item?.title || $store.contextMenu.item?.name"></h3>
            </div>

            <a :href="'https://www.themoviedb.org/' + (currentTab === 'movies' ? 'movie' : 'tv') + '/' + $store.contextMenu.item?.id"
               target="_blank"
               class="px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 flex items-center gap-2 w-full">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
                </svg>
                view on tmdb
            </a>

            <button @click="copyToClipboard($store.contextMenu.item?.title || $store.contextMenu.item?.name)"
                    class="px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 flex items-center gap-2 w-full">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
                </svg>
                copy title
            </button>

            <button @click="copyToClipboard($store.contextMenu.item?.id)"
                    class="px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 flex items-center gap-2 w-full">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" />
                </svg>
                copy tmdb id
            </button>

            <button @click="copyToClipboard($store.contextMenu.item?.overview)"
                    class="px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 flex items-center gap-2 w-full">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h7" />
                </svg>
                copy overview
            </button>

            <div class="border-t border-gray-700 my-2"></div>

            <button @click="toggleWatchLater($store.contextMenu.item); $store.contextMenu.show = false"
                    class="px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 flex items-center gap-2 w-full">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z" />
                </svg>
                <span x-text="isInWatchLater($store.contextMenu.item) ? 'remove from watch later' : 'add to watch later'"></span>
            </button>
        </div>

        <div x-data="toastHandler()" 
             x-show="show"
             @show-toast.window="showToast($event.detail.message)"
             x-transition:enter="transition ease-out duration-300"
             x-transition:enter-start="opacity-0 transform translate-y-8"
             x-transition:enter-end="opacity-100 transform translate-y-0"
             x-transition:leave="transition ease-in duration-200"
             x-transition:leave-start="opacity-100 transform translate-y-0"
             x-transition:leave-end="opacity-0 transform translate-y-8"
             class="fixed bottom-4 right-4 bg-gray-800 text-white px-6 py-3 rounded-lg shadow-xl z-[100] flex items-center gap-2"
             style="pointer-events: none;">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-green-400 flex-shrink-0" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
            </svg>
            <span x-text="message" class="text-sm"></span>
        </div>

        <script>
            function toastHandler() {
                return {
                    message: '',
                    show: false,
                    showToast(msg) {
                        this.message = msg;
                        this.show = true;
                        setTimeout(() => {
                            this.show = false;
                        }, 3000);
                    }
                }
            }

            function contextMenuHandler() {
                return {
                    copyToClipboard(text) {
                        if (!text) return;
                        navigator.clipboard.writeText(text).then(() => {
                            window.dispatchEvent(new CustomEvent('show-toast', { 
                                detail: { message: 'copied to clipboard!' }
                            }));
                        }).catch(() => {
                            window.dispatchEvent(new CustomEvent('show-toast', { 
                                detail: { message: 'failed to copy to clipboard' }
                            }));
                        });
                    }
                }
            }

            document.addEventListener('alpine:init', () => {
                Alpine.store('contextMenu', {
                    show: false,
                    x: 0,
                    y: 0,
                    item: null
                });
            });
        </script>

        <script>
            function app() {
                return {
                    apiKey: '1070730380f5fee0d87cf0382670b255',
                    content: [],
                    currentTab: 'movies',
                    language: localStorage.getItem('selectedLanguage') || 'en',
                    searchQuery: '',
                    currentPage: 1,
                    showWatchLater: false,
                    watchLaterItems: [],
                    watchLaterCount: 0,
                    showModal: false,
                    selectedContent: null,
                    currentVideoUrl: '',
                    selectedSeason: 1,
                    selectedEpisode: 1,
                    seasons: [],
                    episodes: [],
                    selectedSource: localStorage.getItem('defaultSource') || 'embedsu',
                    availableSources: availableSources,
                    showClearConfirm: false,
                    genres: [],
                    selectedGenre: '',
                    minRating: '',
                    filteredContent: [],
                    mobileMenu: false,
                    sortBy: 'popularity.desc',
                    yearRange: '',
                    selectedLanguage: '',

                    async init() {
                        const savedItems = localStorage.getItem('watchLater');
                        if (savedItems) {
                            this.watchLaterItems = JSON.parse(savedItems);
                            this.watchLaterCount = this.watchLaterItems.length;
                        }

                        await this.fetchGenres();
                        await this.fetchContent();
                        
                        this.$watch('currentTab', async () => {
                            this.currentPage = 1;
                            this.selectedGenre = '';
                            this.minRating = '';
                            this.yearRange = '';
                            await this.fetchGenres();
                            await this.fetchContent();
                        });
                        
                        this.$watch('language', () => {
                            this.currentPage = 1;
                            this.fetchContent();
                        });
                    },

                    async fetchGenres() {
                        const baseUrl = 'https://api.themoviedb.org/3';
                        const endpoint = this.currentTab === 'movies' ? 'genre/movie/list' : 'genre/tv/list';
                        const url = `${baseUrl}/${endpoint}?api_key=${this.apiKey}&language=${this.language}`;

                        try {
                            const response = await fetch(url);
                            const data = await response.json();
                            this.genres = data.genres;
                        } catch (error) {
                            console.error('Error fetching genres:', error);
                        }
                    },

                    getGenreName(genreId) {
                        const genre = this.genres.find(g => g.id === parseInt(genreId));
                        return genre ? genre.name : '';
                    },

                    async applyFilters() {
                        const baseUrl = 'https://api.themoviedb.org/3/discover';
                        const endpoint = this.currentTab === 'movies' ? 'movie' : 'tv';
                        
                        let params = new URLSearchParams({
                            api_key: this.apiKey,
                            language: `${this.language}-${this.language.toUpperCase()}`,
                            page: this.currentPage,
                            sort_by: this.sortBy
                        });

                        if (this.selectedGenre) {
                            params.append('with_genres', this.selectedGenre);
                        }

                        if (this.minRating) {
                            params.append('vote_average.gte', this.minRating);
                        }

                        if (this.selectedLanguage) {
                            params.append('with_original_language', this.selectedLanguage);
                        }

                        if (this.yearRange) {
                            const [startYear, endYear] = this.yearRange.split(',');
                            params.append('primary_release_date.gte', `${startYear}-01-01`);
                            params.append('primary_release_date.lte', `${endYear}-12-31`);
                        }

                        const url = `${baseUrl}/${endpoint}?${params.toString()}`;

                        try {
                            const response = await fetch(url);
                            const data = await response.json();
                            this.content = data.results;
                            this.filteredContent = this.content;
                        } catch (error) {
                            console.error('Error applying filters:', error);
                        }
                    },

                    getLanguageName(code) {
                        const languages = {
                            en: 'english',
                            fr: 'french',
                            es: 'spanish',
                            de: 'german',
                            it: 'italian',
                            ja: 'japanese',
                            ko: 'korean'
                        };
                        return languages[code] || code;
                    },

                    getYearRangeName(range) {
                        if (!range) return '';
                        const [start, end] = range.split(',');
                        const decade = Math.floor(start / 10) * 10;
                        return `${decade}s`;
                    },

                    get hasActiveFilters() {
                        return this.selectedGenre || this.minRating || this.yearRange || this.selectedLanguage;
                    },

                    clearAllFilters() {
                        this.selectedGenre = '';
                        this.minRating = '';
                        this.yearRange = '';
                        this.selectedLanguage = '';
                        this.applyFilters();
                    },

                    async fetchContent() {
                        const baseUrl = 'https://api.themoviedb.org/3';
                        const endpoint = this.currentTab === 'movies' ? 'movie/popular' : 'tv/popular';
                        const url = `${baseUrl}/${endpoint}?api_key=${this.apiKey}&language=${this.language}&page=${this.currentPage}`;

                        try {
                            const response = await fetch(url);
                            const data = await response.json();
                            this.content = data.results;
                            this.applyFilters();
                        } catch (error) {
                            console.error('Error fetching content:', error);
                        }
                    },

                    async searchContent() {
                        if (!this.searchQuery) {
                            await this.applyFilters();
                            return;
                        }

                        const baseUrl = 'https://api.themoviedb.org/3';
                        const searchQuery = this.searchQuery.trim();
                        
                        if (searchQuery.startsWith('@')) {
                            const personName = searchQuery.substring(1);
                            if (!personName) {
                                await this.applyFilters();
                                return;
                            }

                            const personUrl = `${baseUrl}/search/person?api_key=${this.apiKey}&query=${encodeURIComponent(personName)}`;
                            try {
                                const personResponse = await fetch(personUrl);
                                const personData = await personResponse.json();
                                const person = personData.results[0];
                                
                                if (person) {
                                    const creditsUrl = `${baseUrl}/person/${person.id}/combined_credits?api_key=${this.apiKey}`;
                                    const creditsResponse = await fetch(creditsUrl);
                                    const creditsData = await creditsResponse.json();
                                    
                                    this.content = creditsData[this.currentTab === 'movies' ? 'cast' : 'crew']
                                        .filter(item => this.currentTab === 'movies' ? item.media_type === 'movie' : item.media_type === 'tv')
                                        .slice(0, 20);
                                } else {
                                    this.content = [];
                                }
                            } catch (error) {
                                console.error('Error searching person:', error);
                                this.content = [];
                            }
                        } else {
                            const endpoint = this.currentTab === 'movies' ? 'movie' : 'tv';
                            const url = `${baseUrl}/search/${endpoint}?api_key=${this.apiKey}&query=${encodeURIComponent(searchQuery)}&language=${this.language}-${this.language.toUpperCase()}&page=${this.currentPage}`;

                            try {
                                const response = await fetch(url);
                                const data = await response.json();
                                this.content = data.results;
                            } catch (error) {
                                console.error('Error searching content:', error);
                                this.content = [];
                            }
                        }
                        
                        this.filteredContent = this.content.filter(item => {
                            if (this.selectedGenre && !item.genre_ids?.includes(parseInt(this.selectedGenre))) {
                                return false;
                            }
                            if (this.minRating && item.vote_average < parseFloat(this.minRating)) {
                                return false;
                            }
                            if (this.selectedLanguage && item.original_language !== this.selectedLanguage) {
                                return false;
                            }
                            return true;
                        });
                    },

                    async openContent(item) {
                        this.selectedContent = item;
                        this.showModal = true;

                        if (this.currentTab === 'shows') {
                            const url = `https://api.themoviedb.org/3/tv/${item.id}?api_key=${this.apiKey}`;
                            try {
                                const response = await fetch(url);
                                const data = await response.json();
                                this.seasons = Array.from({length: data.number_of_seasons}, (_, i) => i + 1);
                                this.updateEpisodes();
                            } catch (error) {
                                console.error('Error fetching seasons:', error);
                            }
                        }
                        this.updateVideoUrl();
                    },

                    getSourceUrl(sourceId, type, params) {
                        const source = this.availableSources.find(s => s.id === sourceId);
                        if (!source) return '';

                        let url = source.urls[type];
                        Object.entries(params).forEach(([key, value]) => {
                            url = url.replace(`{${key}}`, value);
                        });
                        return url;
                    },

                    updateVideoUrl() {
                        const source = this.availableSources.find(s => s.id === this.selectedSource);
                        if (!source) return '';

                        const params = this.currentTab === 'shows'
                            ? { id: this.selectedContent.id, season: this.selectedSeason, episode: this.selectedEpisode }
                            : { id: this.selectedContent.id };

                        this.currentVideoUrl = this.getSourceUrl(
                            this.selectedSource,
                            this.currentTab === 'shows' ? 'tv' : 'movie',
                            params
                        );
                    },

                    async updateEpisodes() {
                        const url = `https://api.themoviedb.org/3/tv/${this.selectedContent.id}/season/${this.selectedSeason}?api_key=${this.apiKey}`;
                        try {
                            const response = await fetch(url);
                            const data = await response.json();
                            this.episodes = Array.from({length: data.episodes.length}, (_, i) => i + 1);
                            this.selectedEpisode = 1;
                        } catch (error) {
                            console.error('Error fetching episodes:', error);
                        }
                    },

                    loadEpisode() {
                        this.updateVideoUrl();
                    },

                    async changePage(page) {
                        this.currentPage = page;
                        if (this.searchQuery) {
                            await this.searchContent();
                        } else {
                            await this.fetchContent();
                        }
                    },

                    toggleWatchLater(item) {
                        const index = this.watchLaterItems.findIndex(i => i.id === item.id);
                        if (index === -1) {
                            this.watchLaterItems.push({
                                ...item,
                                type: this.currentTab === 'movies' ? 'movie' : 'tv'
                            });
                        } else {
                            this.watchLaterItems.splice(index, 1);
                        }
                        this.watchLaterCount = this.watchLaterItems.length;
                        localStorage.setItem('watchLater', JSON.stringify(this.watchLaterItems));
                    },

                    isInWatchLater(item) {
                        return this.watchLaterItems.some(i => i.id === item.id);
                    },

                    clearWatchLater() {
                        this.showClearConfirm = true;
                    },

                    doClearWatchLater() {
                        this.watchLaterItems = [];
                        this.watchLaterCount = 0;
                        localStorage.setItem('watchLater', JSON.stringify([]));
                        this.showClearConfirm = false;
                    },

                    pickRandom() {
                        const randomItem = this.filteredContent[Math.floor(Math.random() * this.filteredContent.length)];
                        if (randomItem) {
                            window.location.href = `watch.html?id=${randomItem.id}&type=${this.currentTab === 'movies' ? 'movie' : 'tv'}`;
                        }
                    },

                    changeLanguage(newLanguage) {
                        this.language = newLanguage;
                        localStorage.setItem('selectedLanguage', newLanguage);
                        this.fetchContent();
                    }
                }
            }
        </script>
        <button 
            @click="window.scrollTo({top: 0})" 
            @scroll.window="showScrollTop = window.pageYOffset > 500"
            x-data="{ showScrollTop: false }"
            x-show="showScrollTop"
            x-transition:enter="transition ease-out duration-300"
            x-transition:enter-start="opacity-0 transform translate-y-10"
            x-transition:enter-end="opacity-100 transform translate-y-0"
            x-transition:leave="transition ease-in duration-300"
            x-transition:leave-start="opacity-100 transform translate-y-0"
            x-transition:leave-end="opacity-0 transform translate-y-10"
            class="fixed bottom-8 right-8 bg-gray-600 hover:bg-gray-500 text-white rounded-full p-4 shadow-lg cursor-pointer transition-all duration-300 hover:scale-110 z-50">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18" />
            </svg>
        </button>
        <script>
            document.querySelector('.search-container input').addEventListener('mousemove', (e) => {
                const container = e.target.parentElement;
                const rect = container.getBoundingClientRect();
                const x = ((e.clientX - rect.left) * 100) / rect.width;
                const y = ((e.clientY - rect.top) * 100) / rect.height;
                container.style.setProperty('--mouse-x', x + '%');
                container.style.setProperty('--mouse-y', y + '%');
            });
        </script>
        <script>
            window.addEventListener('appearance-changed', () => {
                const particlesEl = document.getElementById('particles-js');
                if (localStorage.getItem('showParticles') === 'false') {
                    particlesEl.style.display = 'none';
                } else {
                    particlesEl.style.display = 'block';
                }
            });
        </script>
    </div>
</body>
</html>
